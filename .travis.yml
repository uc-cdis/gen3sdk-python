language: python
python:
- 2.7
- 3.6
env:
- REPOSITORY="uc-cdis/gen3sdk-python" PR_NUMBER="$TRAVIS_PULL_REQUEST"
install:
- pip install -r requirements.txt
- pip install -r test-requirements.txt
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then pip install -e git+https://git@github.com/uc-cdis/wool.git#egg=wool;
  fi
- mv $VIRTUAL_ENV/src/indexclient/indexclient gen3/.
script:
- sed -i.bak "s/0.1.0/$(git describe --tags --abbrev=0 --match=[0-9]*)/g" setup.py
- python setup.py install
- py.test -vv tests
after_script:
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then wool; fi
deploy:
  provider: pypi
  user: uccdistravis
  password:
    secure: dfN8BKAc1aYJVr6TsEdYgGwb6DWId/RbxaEtCbZdGmqoZMlbx5MaR0zWpwWXxpUIuINcCApapPgKlUMTgcwwKXHO3T7Ov4IPYGU73hZhgZE0au8lDrAhDYaiDNXVtncVY0Thj+yO0E6znwIhrrT+K9+fRPpMKR+uC3Pp3IObH+l0toQV8RkFJ1UENrSmW+oB8ELqeQmAllaVzv05rmXwHvvLwrHdM935Ifo2vAwMK7nyX3DJMe6bjGVwQUwBzNXLmUBodUz4+Cr48lxBJ/5yNkXfaYAl1rF0kxLvFTcdOHzNqNYDgvXdMa//igWIYIzjvPl+YxFg9eq5+BasvQ3VLnfvD83iNux6ig7drI+YmZToT9DSE7MzqPb6AQ38nSY9Dc1uXp64C6JDafBAOysI0xM0y8UPnudI9bkUqlhX+Y+ilvs8jKDIvh3fObc4KzTZM2dSGeRDlLNsPZAKfyhHSNjA4ir6cnD+vOTga+6RtHjd++2RILoxN4f9xn7Cu85asCLQOXxT6pg14xvUlQl71C7n/G/5ATKHQ8SBYpyqwPcnv6ih46Ix4WgF++M7pEeE7X798AEctccLpZK7U9ndeFlGd7l7lybHUu4JjwtJ5JCospo3dtg4nxz7Ew+VIdK56kglUkrHp+jrqnacBb3nmE8vxDuI+xnQ7Vq2RdxFhHY=
  on:
    tags: true
    branch: master
    python: '3.6'
