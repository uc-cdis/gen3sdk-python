
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DRS Download Tools &#8212; Gen3 SDK  documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Indexing Tools" href="indexing.html" />
    <link rel="prev" title="Gen3 Tools" href="../tools.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-gen3.tools.download.drs_download">
<span id="drs-download-tools"></span><h1>DRS Download Tools<a class="headerlink" href="#module-gen3.tools.download.drs_download" title="Permalink to this headline">¶</a></h1>
<p>Module for downloading and listing JSON DRS manifest and DRS objects. The main classes in
this module for downloading DRS objects are DownloadManager and Manifest.</p>
<blockquote>
<div><dl>
<dt>Examples:</dt><dd><p>This generates the Gen3Jobs class pointed at the sandbox commons while
using the credentials.json downloaded from the commons profile page.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datafiles</span> <span class="o">=</span> <span class="n">Manifest</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;sample/manifest_1.json&#39;</span><span class="p">)</span>
<span class="go">    downloadManager = DownloadManager(&quot;source.my_commons.org&quot;,</span>
<span class="go">                      Gen3Auth(refresh_file=&quot;~.gen3/my_credentials.json&quot;), datafiles)</span>
<span class="go">    for i in datafiles:</span>
<span class="go">        print(i)</span>
<span class="go">    downloadManager.download(datafiles, &quot;.&quot;)</span>
</pre></div>
</div>
<p>See docs/howto/drsDownloading.md for more details</p>
</dd>
</dl>
</div></blockquote>
<dl class="py class">
<dt id="gen3.tools.download.drs_download.DownloadManager">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">DownloadManager</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="../auth.html#gen3.auth.Gen3Auth" title="gen3.auth.Gen3Auth"><span class="pre">gen3.auth.Gen3Auth</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_list</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><span class="pre">gen3.tools.download.drs_download.Downloadable</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to assist in downloading a list of Downloadable object which at a minimum is a json manifest
of DRS object ids. The methods of interest are download and user_access.</p>
<dl class="py method">
<dt id="gen3.tools.download.drs_download.DownloadManager.cache_hosts_wts_tokens">
<code class="sig-name descname"><span class="pre">cache_hosts_wts_tokens</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager.cache_hosts_wts_tokens"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager.cache_hosts_wts_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the list of DRS host obtain a WTS token for all DRS hosts in the list. It’s is possible</p>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.DownloadManager.download">
<code class="sig-name descname"><span class="pre">download</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_list</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><span class="pre">gen3.tools.download.drs_download.Downloadable</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager.download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager.download" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads objects to the directory or current working directory.
The input is an list of Downloadable object created by loading a manifest
using the Manifest class or a call to Manifest.load(…</p>
<p>The download manager will download each file in the manifest, in the
case of errors they are logged and it continues.</p>
<p>The return value is a list of DownloadStatus object, detailing the results
of the download.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>object_list</strong> (<em>List</em><em>[</em><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><em>Downloadable</em></a><em>]</em>) – </p></li>
<li><p><strong>save_directory</strong> (<em>str</em>) – directory to save to (will be created)</p></li>
<li><p><strong>show_progress</strong> (<em>bool</em>) – show a download progress bar</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of DownloadStatus objects for each object id in object_list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.DownloadManager.get_fresh_token">
<code class="sig-name descname"><span class="pre">get_fresh_token</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">drs_hostname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager.get_fresh_token"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager.get_fresh_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Will return and/or refresh and return a WTS token if hostname is known otherwise returns None.
:param drs_hostname: hostname to get token for
:type drs_hostname: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>access token if successful otherwise None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.DownloadManager.resolve_objects">
<code class="sig-name descname"><span class="pre">resolve_objects</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_list</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><span class="pre">gen3.tools.download.drs_download.Downloadable</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager.resolve_objects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager.resolve_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an Downloadable object list, resolve the DRS hostnames and update each Downloadable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>object_list</strong> (<em>List</em><em>[</em><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><em>Downloadable</em></a><em>]</em>) – list of Downloadable objects to resolve</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.DownloadManager.user_access">
<code class="sig-name descname"><span class="pre">user_access</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadManager.user_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadManager.user_access" title="Permalink to this definition">¶</a></dt>
<dd><p>List the user’s access permissions on each host needed to download
DRS objects in the manifest. A useful way to determine if access permissions
are one reason a download failed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of authz for each DRS host</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="gen3.tools.download.drs_download.DownloadStatus">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">DownloadStatus</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'pending'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#DownloadStatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the download status of objectIDs.</p>
<p>The DataManager will return a list of DownloadStatus as a result of calling the download method</p>
<p>Status is “pending” until it is downloaded or an error occurs.
.. attribute:: filename</p>
<blockquote>
<div><p>the name of the file to download</p>
<dl class="field-list simple">
<dt class="field-odd">type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</div></blockquote>
<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.DownloadStatus.status">
<code class="sig-name descname"><span class="pre">status</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadStatus.status" title="Permalink to this definition">¶</a></dt>
<dd><p>status of file download initially “pending”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.DownloadStatus.start_time">
<code class="sig-name descname"><span class="pre">start_time</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadStatus.start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>start time of download as datetime initially None</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[datetime]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.DownloadStatus.end_time">
<code class="sig-name descname"><span class="pre">end_time</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.DownloadStatus.end_time" title="Permalink to this definition">¶</a></dt>
<dd><p>end time of download as datetime initially None</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[datetime]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="gen3.tools.download.drs_download.Downloadable">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">Downloadable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">object_id:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">object_type:</span> <span class="pre">Optional[gen3.tools.download.drs_download.DRSObjectType]</span> <span class="pre">=</span> <span class="pre">&lt;DRSObjectType.unknown:</span> <span class="pre">'unknown'&gt;</span></em>, <em class="sig-param"><span class="pre">hostname:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">file_size:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">-1</span></em>, <em class="sig-param"><span class="pre">file_name:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">updated_time:</span> <span class="pre">Optional[datetime.datetime]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">created_time:</span> <span class="pre">Optional[datetime.datetime]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">access_methods:</span> <span class="pre">List[Dict[str</span></em>, <em class="sig-param"><span class="pre">Any]]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">children:</span> <span class="pre">List[gen3.tools.download.drs_download.Downloadable]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Downloadable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable" title="Permalink to this definition">¶</a></dt>
<dd><p>Class handling the information for a DRS object. The information is populated from the manifest or
by retrieving the information from a DRS server.</p>
<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.object_id">
<code class="sig-name descname"><span class="pre">object_id</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.object_id" title="Permalink to this definition">¶</a></dt>
<dd><p>DRS object id (REQUIRED)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.object_type">
<code class="sig-name descname"><span class="pre">object_type</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.object_type" title="Permalink to this definition">¶</a></dt>
<dd><p>type of DRS object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>DRSObjectType</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.hostname">
<code class="sig-name descname"><span class="pre">hostname</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>hostname of DRS object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.file_size">
<code class="sig-name descname"><span class="pre">file_size</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>size in bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.file_name">
<code class="sig-name descname"><span class="pre">file_name</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>name of file</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.updated_time">
<code class="sig-name descname"><span class="pre">updated_time</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.updated_time" title="Permalink to this definition">¶</a></dt>
<dd><p>timestamp of last update to file</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.created_time">
<code class="sig-name descname"><span class="pre">created_time</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.created_time" title="Permalink to this definition">¶</a></dt>
<dd><p>timestamp when file is created</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.access_methods">
<code class="sig-name descname"><span class="pre">access_methods</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.access_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>list of access methods (e.g. s3) for DRS object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable.children">
<code class="sig-name descname"><span class="pre">children</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.children" title="Permalink to this definition">¶</a></dt>
<dd><p>list of child objects (in the case of DRS bundles)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable">Downloadable</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Downloadable._manager">
<code class="sig-name descname"><span class="pre">_manager</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable._manager" title="Permalink to this definition">¶</a></dt>
<dd><p>manager for this Downloadable</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#gen3.tools.download.drs_download.DownloadManager" title="gen3.tools.download.drs_download.DownloadManager">DownloadManager</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.Downloadable.download">
<code class="sig-name descname"><span class="pre">download</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Downloadable.download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.download" title="Permalink to this definition">¶</a></dt>
<dd><p>calls the manager to download this object. Allows Downloadables to be self downloading</p>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.Downloadable.pprint">
<code class="sig-name descname"><span class="pre">pprint</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Downloadable.pprint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Downloadable.pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty prints the object information. This is used for listing an object.
In the case of a DRS bundle the child objects are listed similar to the linux tree command</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="gen3.tools.download.drs_download.Manifest">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">Manifest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md5sum</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commons_url</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Data class representing a Gen3 JSON manifest typically exported from a Gen3 discovery page.</p>
<p>The class is passed to the DownloadManager to download or list all of the files in the manifest.
The Download manager will cache additional information (if available)</p>
<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Manifest.object_id">
<code class="sig-name descname"><span class="pre">object_id</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.object_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the DRS object id. This is the only attribute that needs to be defined</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Manifest.file_size">
<code class="sig-name descname"><span class="pre">file_size</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>the filesize of the object, if contained in the manifest</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Manifest.file_name">
<code class="sig-name descname"><span class="pre">file_name</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the file pointed to by the DRS object id</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Manifest.md5sum">
<code class="sig-name descname"><span class="pre">md5sum</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.md5sum" title="Permalink to this definition">¶</a></dt>
<dd><p>the checksum of the object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="gen3.tools.download.drs_download.Manifest.commons_url">
<code class="sig-name descname"><span class="pre">commons_url</span></code><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.commons_url" title="Permalink to this definition">¶</a></dt>
<dd><p>url of the indexd server to retrieve file/bundle from</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.Manifest.create_object_list">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">create_object_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><span class="pre">gen3.tools.download.drs_download.Downloadable</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Manifest.create_object_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.create_object_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of Downloadable instances from the manifest</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>manifest</strong> (<em>list</em>) – list of manifest objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of Downloadable instances</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.Manifest.load">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gen3.tools.download.drs_download.Downloadable" title="gen3.tools.download.drs_download.Downloadable"><span class="pre">gen3.tools.download.drs_download.Downloadable</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Manifest.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to load a json manifest and return a list of Bownloadable object.
This list is passed to the DownloadManager methods of download, and list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>Path</em>) – path to manifest file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of Downloadable objects if successfully opened/parsed None otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="gen3.tools.download.drs_download.Manifest.load_manifest">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">load_manifest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#Manifest.load_manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.Manifest.load_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a json manifest</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="gen3.tools.download.drs_download.download_drs_object">
<code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">download_drs_object</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#download_drs_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.download_drs_object" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function used to download a single DRS object.
:param hostname: hostname of Gen3 commons to use for access and WTS
:type hostname: str
:param auth: Gen3 Auth instance
:param object_id: DRS object id
:type object_id: str
:param output_dir: directory to save downloaded files to</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of DownloadStatus objects for the DRS object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gen3.tools.download.drs_download.download_files_in_drs_manifest">
<code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">download_files_in_drs_manifest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#download_files_in_drs_manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.download_files_in_drs_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function used to download a json manifest.
:param hostname: hostname of Gen3 commons to use for access and WTS
:type hostname: str
:param auth: Gen3 Auth instance
:type auth: str
:param infile: manifest file
:type infile: str
:param output_dir: directory to save downloaded files to</p>
<p>Returns:</p>
</dd></dl>

<dl class="py function">
<dt id="gen3.tools.download.drs_download.list_access_in_drs_manifest">
<code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">list_access_in_drs_manifest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infile</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#list_access_in_drs_manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.list_access_in_drs_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function to list a users access for all DRS hostname in a manifest.
:param hostname: hostname of Gen3 commons to use for access and WTS
:type hostname: str
:param auth: Gen3 Auth instance
:param infile: manifest file
:type infile: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successfully listed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gen3.tools.download.drs_download.list_drs_object">
<code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">list_drs_object</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#list_drs_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.list_drs_object" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function used to list a DRS object.
:param hostname: hostname of Gen3 commons to use for access and WTS
:type hostname: str
:param auth: Gen3 Auth instance
:param object_id: DRS object
:type object_id: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successfully listed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gen3.tools.download.drs_download.list_files_in_drs_manifest">
<code class="sig-prename descclassname"><span class="pre">gen3.tools.download.drs_download.</span></code><code class="sig-name descname"><span class="pre">list_files_in_drs_manifest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../_modules/gen3/tools/download/drs_download.html#list_files_in_drs_manifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gen3.tools.download.drs_download.list_files_in_drs_manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper function used by the cli to list files in a manifest.
:param hostname: hostname of Gen3 commons to use for access and WTS
:type hostname: str
:param auth: Gen3 Auth instance
:param infile: manifest file
:type infile: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successfully listed</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Gen3 SDK</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=uc-cdis&repo=gen3sdk-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../auth.html">Gen3 Auth Helper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../file.html">Gen3 File Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexing.html">Gen3 Index Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs.html">Gen3 Jobs Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Gen3 Metadata Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../query.html">Gen3 Query Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../submission.html">Gen3 Submission Class</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tools.html">Gen3 Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">DRS Download Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="indexing.html">Indexing Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Metadata Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../wss.html">Gen3 Workspace Storage</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../tools.html">Gen3 Tools</a><ul>
      <li>Previous: <a href="../tools.html" title="previous chapter">Gen3 Tools</a></li>
      <li>Next: <a href="indexing.html" title="next chapter">Indexing Tools</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Center for Translational Data Science.
      
      |
      <a href="../_sources/tools/drs_pull.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/uc-cdis/gen3sdk-python" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>